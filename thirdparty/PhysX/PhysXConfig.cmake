cmake_minimum_required(VERSION 3.20)

find_path(PHYSX_INCLUDES NAMES "PxScene.h" REQUIRED)

find_library(PhysX_LIBRARY_RELEASE NAMES "PhysX_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXCharacterKinematic_LIBRARY_RELEASE NAMES "PhysXCharacterKinematic_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXCooking_LIBRARY_RELEASE NAMES "PhysXCooking_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXExtensions_LIBRARY_RELEASE NAMES "PhysXExtensions_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXVehicle_LIBRARY_RELEASE NAMES "PhysXVehicle_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(SimulationController_LIBRARY_RELEASE NAMES "SimulationController_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXFoundation_LIBRARY_RELEASE NAMES "PhysXFoundation_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(LowLevel_LIBRARY_RELEASE NAMES "LowLevel_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(LowLevelAABB_LIBRARY_RELEASE NAMES "LowLevelAABB_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(LowLevelDynamics_LIBRARY_RELEASE NAMES "LowLevelDynamics_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXCommon_LIBRARY_RELEASE NAMES "PhysXCommon_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(SceneQuery_LIBRARY_RELEASE NAMES "SceneQuery_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXTask_LIBRARY_RELEASE NAMES "PhysXTask_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXPvdSDK_LIBRARY_RELEASE NAMES "PhysXPvdSDK_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)

find_library(PhysX_LIBRARY_DEBUG NAMES "PhysX_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXCharacterKinematic_LIBRARY_DEBUG NAMES "PhysXCharacterKinematic_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXCooking_LIBRARY_DEBUG NAMES "PhysXCooking_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXExtensions_LIBRARY_DEBUG NAMES "PhysXExtensions_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXVehicle_LIBRARY_DEBUG NAMES "PhysXVehicle_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(SimulationController_LIBRARY_DEBUG NAMES "SimulationController_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXFoundation_LIBRARY_DEBUG NAMES "PhysXFoundation_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(LowLevel_LIBRARY_DEBUG NAMES "LowLevel_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(LowLevelAABB_LIBRARY_DEBUG NAMES "LowLevelAABB_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(LowLevelDynamics_LIBRARY_DEBUG NAMES "LowLevelDynamics_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXCommon_LIBRARY_DEBUG NAMES "PhysXCommon_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(SceneQuery_LIBRARY_DEBUG NAMES "SceneQuery_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXTask_LIBRARY_DEBUG NAMES "PhysXTask_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)
find_library(PhysXPvdSDK_LIBRARY_DEBUG NAMES "PhysXPvdSDK_static_64" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "lib" REQUIRED NO_DEFAULT_PATH)

find_file(PhysX_RELEASE NAMES "PhysX_64.dll" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "bin" REQUIRED NO_DEFAULT_PATH)
find_file(PhysXCommon_RELEASE NAMES "PhysXCommon_64.dll" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "bin" REQUIRED NO_DEFAULT_PATH)
find_file(PhysXCooking_RELEASE NAMES "PhysXCooking_64.dll" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "bin" REQUIRED NO_DEFAULT_PATH)
find_file(PhysXFoundation_RELEASE NAMES "PhysXFoundation_64.dll" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" PATH_SUFFIXES "bin" REQUIRED NO_DEFAULT_PATH)

find_file(PhysX_DEBUG NAMES "PhysX_64.dll" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "bin" REQUIRED NO_DEFAULT_PATH)
find_file(PhysXCommon_DEBUG NAMES "PhysXCommon_64.dll" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "bin" REQUIRED NO_DEFAULT_PATH)
find_file(PhysXCooking_DEBUG NAMES "PhysXCooking_64.dll" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "bin" REQUIRED NO_DEFAULT_PATH)
find_file(PhysXFoundation_DEBUG NAMES "PhysXFoundation_64.dll" PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" PATH_SUFFIXES "bin" REQUIRED NO_DEFAULT_PATH)

add_library(PhysX::PhysX_ SHARED IMPORTED)
set_target_properties(
    PhysX::PhysX_ PROPERTIES
    IMPORTED_LOCATION "${PhysX_RELEASE}"
    IMPORTED_IMPLIB "${PhysX_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysX_DEBUG}"
    IMPORTED_IMPLIB_DEBUG "${PhysX_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysXCharacterKinematic STATIC IMPORTED)
set_target_properties(
    PhysX::PhysXCharacterKinematic PROPERTIES
    IMPORTED_LOCATION "${PhysXCharacterKinematic_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysXCharacterKinematic_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysXCooking SHARED IMPORTED)
set_target_properties(
    PhysX::PhysXCooking PROPERTIES
    IMPORTED_LOCATION "${PhysXCooking_RELEASE}"
    IMPORTED_IMPLIB "${PhysXCooking_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysXCooking_DEBUG}"
    IMPORTED_IMPLIB_DEBUG "${PhysXCooking_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysXExtensions STATIC IMPORTED)
set_target_properties(
    PhysX::PhysXExtensions PROPERTIES
    IMPORTED_LOCATION "${PhysXExtensions_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysXExtensions_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysXVehicle STATIC IMPORTED)
set_target_properties(
    PhysX::PhysXVehicle PROPERTIES
    IMPORTED_LOCATION "${PhysXVehicle_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysXVehicle_LIBRARY_DEBUG}"
)

add_library(PhysX::SimulationController STATIC IMPORTED)
set_target_properties(
    PhysX::SimulationController PROPERTIES
    IMPORTED_LOCATION "${SimulationController_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${SimulationController_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysXFoundation SHARED IMPORTED)
set_target_properties(
    PhysX::PhysXFoundation PROPERTIES
    IMPORTED_LOCATION "${PhysXFoundation_RELEASE}"
    IMPORTED_IMPLIB "${PhysXFoundation_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysXFoundation_DEBUG}"
    IMPORTED_IMPLIB_DEBUG "${PhysXFoundation_LIBRARY_DEBUG}"
)

add_library(PhysX::LowLevel STATIC IMPORTED)
set_target_properties(
    PhysX::LowLevel PROPERTIES
    IMPORTED_LOCATION "${LowLevel_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${LowLevel_LIBRARY_DEBUG}"
)

add_library(PhysX::LowLevelAABB STATIC IMPORTED)
set_target_properties(
    PhysX::LowLevelAABB PROPERTIES
    IMPORTED_LOCATION "${LowLevelAABB_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${LowLevelAABB_LIBRARY_DEBUG}"
)

add_library(PhysX::LowLevelDynamics STATIC IMPORTED)
set_target_properties(
    PhysX::LowLevelDynamics PROPERTIES
    IMPORTED_LOCATION "${LowLevelDynamics_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${LowLevelDynamics_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysXCommon SHARED IMPORTED)
set_target_properties(
    PhysX::PhysXCommon PROPERTIES
    IMPORTED_LOCATION "${PhysXCommon_RELEASE}"
    IMPORTED_IMPLIB "${PhysXCommon_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysXCommon_DEBUG}"
    IMPORTED_IMPLIB_DEBUG "${PhysXCommon_LIBRARY_DEBUG}"
)

add_library(PhysX::SceneQuery STATIC IMPORTED)
set_target_properties(
    PhysX::SceneQuery PROPERTIES
    IMPORTED_LOCATION "${SceneQuery_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${SceneQuery_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysXTask STATIC IMPORTED)
set_target_properties(
    PhysX::PhysXTask PROPERTIES
    IMPORTED_LOCATION "${PhysXTask_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysXTask_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysXPvdSDK STATIC IMPORTED)
set_target_properties(
    PhysX::PhysXPvdSDK PROPERTIES
    IMPORTED_LOCATION "${PhysXPvdSDK_LIBRARY_RELEASE}"
    IMPORTED_LOCATION_DEBUG "${PhysXPvdSDK_LIBRARY_DEBUG}"
)

add_library(PhysX::PhysX INTERFACE IMPORTED)
set_target_properties(
    PhysX::PhysX PROPERTIES
    INTERFACE_INCLUDE_DIRECTORIES "${PHYSX_INCLUDES}"
    INTERFACE_LINK_LIBRARIES "PhysX::PhysX_;PhysX::PhysXCharacterKinematic;PhysX::PhysXCooking;PhysX::PhysXExtensions;PhysX::PhysXVehicle;PhysX::SimulationController;PhysX::PhysXFoundation;PhysX::LowLevel;PhysX::LowLevelAABB;PhysX::LowLevelDynamics;PhysX::PhysXCommon;PhysX::SceneQuery;PhysX::PhysXTask;PhysX::PhysXPvdSDK"
)
